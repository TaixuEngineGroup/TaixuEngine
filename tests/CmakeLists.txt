cmake_minimum_required(VERSION 3.20)

project(TaixuEngineTests LANGUAGES CXX)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_EXTENSIONS OFF)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_C_STANDARD 11)

# ---- Options ----

option(ENABLE_TEST_COVERAGE "Enable test coverage" OFF)
option(TEST_INSTALLED_VERSION "Test the version found by find_package" OFF)

# --- Import tools ----

include(../cmake/FindTools.cmake)

# ---- Dependencies ----

include(../cmake/CPM.cmake)

include(../3rdparty/FindCatch2.cmake)

# ---- Add Options ----

if(APPLE)
    # TODO: Delete this line after assimp group fix this issue: #4864 #3933
    # Just for my mac
    link_directories(/opt/homebrew/Cellar/minizip/1.2.13/lib)
endif(APPLE)

# ---- Add Tests ----

enable_testing()

# Add a testing executable
add_executable(unit_tests unit_tests/unit_tests.cpp)

target_link_libraries(unit_tests
        TaixuRuntime
        Catch2::Catch2WithMain
        )

add_test(test_all unit_tests)